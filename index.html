<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Flask-CQLAlchemy by thegeorgeous</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Flask-CQLAlchemy</h1>
        <h2>Flask-CQLAlchemy handles connections to Cassandra clusters and gives a unified easier way to declare models and their columns</h2>
        <a href="https://github.com/thegeorgeous/flask-cqlalchemy" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a id="flask-cqlalchemy" class="anchor" href="#flask-cqlalchemy" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Flask-CQLAlchemy</h1>

<p><a href="https://pypi.python.org/pypi/Flask-CQLAlchemy"><img src="https://img.shields.io/pypi/v/flask-cqlalchemy.svg" alt="Latest Version"></a>
<a href="https://travis-ci.org/thegeorgeous/flask-cqlalchemy"><img src="https://travis-ci.org/thegeorgeous/flask-cqlalchemy.svg?branch=master" alt="Build Status"></a>
<a href="https://pypi.python.org/pypi/Flask-CQLAlchemy"><img src="https://img.shields.io/pypi/pyversions/flask-cqlalchemy.svg" alt="Python Versions"></a>
<a href="https://pypi.python.org/pypi/Flask-CQLAlchemy"><img src="https://img.shields.io/pypi/l/Flask-CQLAlchemy.svg" alt="License"></a>
<a href="https://codeclimate.com/github/thegeorgeous/flask-cqlalchemy"><img src="https://codeclimate.com/github/thegeorgeous/flask-cqlalchemy/badges/gpa.svg" alt="Code Climate"></a>
<a href="https://pypi.python.org/pypi/Flask-CQLAlchemy"><img src="https://img.shields.io/pypi/dm/flask-cqlalchemy.svg" alt="Downloads"></a></p>

<p>Flask-CQLAlchemy handles connections to Cassandra clusters
and gives a unified easier way to declare models and their
columns</p>

<p><strong>Now with support for abstract models and UserDefinedTypes</strong></p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h2>

<div class="highlight highlight-source-shell"><pre>pip install flask-cqlalchemy</pre></div>

<h2>
<a id="dependencies" class="anchor" href="#dependencies" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Dependencies</h2>

<p>As such Flask-CQLAlchemy depends only on the cassandra-driver. It is assumed
that you already have flask installed.</p>

<p>Flask-CQLAlchemy has been tested with versions 2.6.0, 2.7.2, 3.0.0 and 3.1.0 of
cassandra-driver. It is known to work with all versions &gt;=2.5, but use it at
your own risk. All previous versions of Flask-CQLAlchemy are deprecated.</p>

<h2>
<a id="example" class="anchor" href="#example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example</h2>

<div class="highlight highlight-source-python"><pre><span class="pl-c">#example_app.py</span>
<span class="pl-k">import</span> uuid
<span class="pl-k">from</span> flask <span class="pl-k">import</span> Flask
<span class="pl-k">from</span> flask.ext.cqlalchemy <span class="pl-k">import</span> CQLAlchemy

app <span class="pl-k">=</span> Flask(<span class="pl-c1">__name__</span>)
app.config[<span class="pl-s"><span class="pl-pds">'</span>CASSANDRA_HOSTS<span class="pl-pds">'</span></span>] <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>127.0.0.1<span class="pl-pds">'</span></span>]
app.config[<span class="pl-s"><span class="pl-pds">'</span>CASSANDRA_KEYSPACE<span class="pl-pds">'</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>cqlengine<span class="pl-pds">"</span></span>
db <span class="pl-k">=</span> CQLAlchemy(app)


<span class="pl-k">class</span> <span class="pl-en">User</span>(<span class="pl-e">db</span>.<span class="pl-e">Model</span>):
    uid <span class="pl-k">=</span> db.columns.UUID(<span class="pl-v">primary_key</span><span class="pl-k">=</span><span class="pl-c1">True</span>, <span class="pl-v">default</span><span class="pl-k">=</span>uuid.uuid4)
    username <span class="pl-k">=</span> db.columns.Text(<span class="pl-v">required</span><span class="pl-k">=</span><span class="pl-c1">False</span>)</pre></div>

<h3>
<a id="user-defined-types" class="anchor" href="#user-defined-types" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>User Defined Types</h3>

<div class="highlight highlight-source-python"><pre><span class="pl-c">#example_app_udt.py</span>
<span class="pl-k">import</span> uuid
<span class="pl-k">from</span> flask <span class="pl-k">import</span> Flask
<span class="pl-k">from</span> flask_cqlalchemy <span class="pl-k">import</span> CQLAlchemy

app <span class="pl-k">=</span> Flask(<span class="pl-c1">__name__</span>)
app.config[<span class="pl-s"><span class="pl-pds">'</span>CASSANDRA_HOSTS<span class="pl-pds">'</span></span>] <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>127.0.0.1<span class="pl-pds">'</span></span>]
app.config[<span class="pl-s"><span class="pl-pds">'</span>CASSANDRA_KEYSPACE<span class="pl-pds">'</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>cqlengine<span class="pl-pds">"</span></span>
app.config[<span class="pl-s"><span class="pl-pds">'</span>CASSANDRA_SETUP_KWARGS<span class="pl-pds">'</span></span>] <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">'</span>protocol_version<span class="pl-pds">'</span></span>: <span class="pl-c1">3</span>}
db <span class="pl-k">=</span> CQLAlchemy(app)


<span class="pl-k">class</span> <span class="pl-en">address</span>(<span class="pl-e">db</span>.<span class="pl-e">UserType</span>):
    street <span class="pl-k">=</span> db.columns.Text()
    zipcode <span class="pl-k">=</span> db.columns.Integer()

<span class="pl-k">class</span> <span class="pl-en">users</span>(<span class="pl-e">db</span>.<span class="pl-e">Model</span>):
    __keyspace__ <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>cqlengine<span class="pl-pds">'</span></span>
    name <span class="pl-k">=</span> db.columns.Text(<span class="pl-v">primary_key</span><span class="pl-k">=</span><span class="pl-c1">True</span>)
    addr <span class="pl-k">=</span> db.columns.UserDefinedType(address)
</pre></div>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage</h2>

<p>Start a python shell</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span><span class="pl-k">from</span> example_app <span class="pl-k">import</span> db, User
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span>db.sync_db()
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span>user1 <span class="pl-k">=</span> User.create(<span class="pl-v">username</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>John Doe<span class="pl-pds">'</span></span>)</pre></div>

<h3>
<a id="user-defined-types-1" class="anchor" href="#user-defined-types-1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>User Defined Types</h3>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span><span class="pl-k">from</span> example_app_udt <span class="pl-k">import</span> db, address, users
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span>db.sync_db()
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span>user_address <span class="pl-k">=</span> address(<span class="pl-v">street</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>Easy St.<span class="pl-pds">"</span></span>, <span class="pl-v">zipcode</span><span class="pl-k">=</span><span class="pl-c1">99999</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> user
users(<span class="pl-v">name</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">'</span>Joe<span class="pl-pds">'</span></span>, <span class="pl-v">addr</span><span class="pl-k">=</span><span class="pl-k">&lt;</span>example_app_udt.address <span class="pl-c1">object</span> at <span class="pl-c1"><span class="pl-k">0x</span>7f4498063310</span><span class="pl-k">&gt;</span>)
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> user.addr
<span class="pl-k">&lt;</span>example_app_udt.address <span class="pl-c1">object</span> at <span class="pl-c1"><span class="pl-k">0x</span>7f4498063310</span><span class="pl-k">&gt;</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> user.addr.street
<span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">'</span>Easy St.<span class="pl-pds">'</span></span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> user.addr.zipcode
<span class="pl-c1">99999</span></pre></div>

<p>For a complete list of available methods refer to the cqlengine
<a href="http://datastax.github.io/python-driver/api/cassandra/cqlengine/models.html">Model documentation</a></p>

<h2>
<a id="configuration-options" class="anchor" href="#configuration-options" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Configuration Options</h2>

<p>CQLAlchemy provides all the option available in the cqlengine connection.setup()
method</p>

<ul>
<li>
<code>CASSANDRA_HOSTS</code> - A list of hosts</li>
<li>
<code>CASSANDRA_KEYSPACE</code> - The default keyspace to use</li>
<li>
<code>CASSANDRA_CONSISTENCY</code> - The global default ConsistencyLevel</li>
<li>
<code>CASSANDRA_LAZY_CONNECT</code> - True if should not connect until first use</li>
<li>
<code>CASSANDRA_RETRY_CONNECT</code> - True if we should retry to connect even if there was
a connection failure initially</li>
<li>
<code>CASSANDRA_SETUP_KWARGS</code> - Pass-through keyword arguments for Cluster()</li>
</ul>

<h2>
<a id="beta-features" class="anchor" href="#beta-features" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Beta Features</h2>

<p>Flask CQLAlchemy supports User Defined Types, provided you are using Cassandra
versions 2.1 or above. However Travis only provides 2.0.9 for testing and so this
feature has not undergone rigorous testing.</p>

<h2>
<a id="contributing" class="anchor" href="#contributing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Contributing</h2>

<p>Found a bug? Need a feature? Open it in issues, or even better, open a PR.
Please include tests in the PR.</p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/thegeorgeous/flask-cqlalchemy/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/thegeorgeous/flask-cqlalchemy/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/thegeorgeous/flask-cqlalchemy"></a> is maintained by <a href="https://github.com/thegeorgeous">thegeorgeous</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-64053543-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
